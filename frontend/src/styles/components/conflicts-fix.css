/* ==========================================================================
   CONFLICTOS FIX - DESACTIVAR SCROLLCHECKPOINTS EN MOBILE
   Archivo: src/styles/components/conflicts-fix.css
   
   ⚠️  IMPORTANTE: Este archivo debe importarse DESPUÉS de checkpoint-projects.css
   para hacer override de los estilos problemáticos.
   ========================================================================== */

/* ==========================================================================
   MOBILE OVERRIDES - DESACTIVAR SISTEMA DE CHECKPOINTS
   ========================================================================== */

@media (max-width: 767px) {
  
  /* 1. DESACTIVAR SCROLL SNAPPING GLOBAL */
  html {
    scroll-snap-type: none !important;
    scroll-behavior: smooth;
  }
  
  body {
    scroll-snap-type: none !important;
  }
  
  /* 2. DESACTIVAR ALTURA FORZADA DE CHECKPOINTS */
  .checkpoint-item {
    height: auto !important;
    min-height: auto !important;
    scroll-snap-align: none !important;
    scroll-snap-stop: normal !important;
    padding: 1rem !important;
    display: block !important;
  }
  
  .checkpoints-main-container {
    scroll-snap-type: none !important;
    padding: 0 !important;
  }
  
  /* 3. OCULTAR NAVEGACIÓN DE CHECKPOINTS COMPLETAMENTE */
  .scroll-indicators {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  .section-nav {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  .back-to-top-button {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  .scroll-progress {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  .checkpoint-title {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }
  
  /* 4. RESETEAR LAYOUT DUAL A SINGLE COLUMN */
  .project-checkpoint-dual {
    display: block !important;
    grid-template-columns: none !important;
    gap: 0 !important;
    width: 100% !important;
    max-width: none !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  
  /* 5. DESACTIVAR CARDS DEL SISTEMA CHECKPOINTS */
  .project-card-red,
  .project-card-celeste {
    display: none !important;
  }
  
  .project-card-expanded-full {
    display: none !important;
  }
  
  /* 6. RESETEAR TÍTULOS STICKY */
  .checkpoints-title {
    position: static !important;
    background: none !important;
    backdrop-filter: none !important;
    border-bottom: none !important;
    font-size: 1.75rem !important;
    padding: 1rem 0 !important;
  }
  
  /* 7. ELIMINAR Z-INDEX CONFLICTIVOS */
  .scroll-indicators,
  .section-nav,
  .back-to-top-button,
  .scroll-progress,
  .checkpoint-title {
    z-index: -1 !important;
  }
  
  /* 8. DESACTIVAR ANIMACIONES DE CHECKPOINTS */
  .checkpoint-item.active {
    animation: none !important;
    transform: none !important;
  }
  
  /* 9. RESETEAR MODAL DE IMÁGENES DE CHECKPOINTS */
  .image-modal-overlay {
    z-index: -1 !important;
    display: none !important;
  }
  
  /* 10. PREVENIR CONFLICTOS DE INTERSECTIONOBSERVER */
  .checkpoint-item[id] {
    scroll-margin-top: 0 !important;
    scroll-margin-bottom: 0 !important;
  }
}

/* ==========================================================================
   TABLET OVERRIDES - SIMPLIFICAR CHECKPOINTS
   ========================================================================== */

@media (min-width: 768px) and (max-width: 1023px) {
  
  /* Simplificar navegación en tablet */
  .scroll-indicators {
    right: 1rem;
    padding: 0.75rem 0.5rem;
    gap: 0.5rem;
  }
  
  .scroll-indicator {
    width: 12px;
    height: 12px;
  }
  
  .section-nav {
    bottom: 1rem;
    padding: 0.5rem 1rem;
    font-size: 0.75rem;
  }
  
  /* Reducir altura de checkpoints en tablet */
  .checkpoint-item {
    height: auto;
    min-height: 80vh;
    padding: 1.5rem;
  }
  
  .project-checkpoint-dual {
    grid-template-columns: 1fr;
    gap: 2rem;
  }
}

/* ==========================================================================
   DESKTOP OVERRIDES - MANTENER FUNCIONALIDAD PERO SIN FORZAR SCROLL
   ========================================================================== */

@media (min-width: 1024px) {
  
  /* Hacer scroll snapping más suave en desktop */
  html {
    scroll-snap-type: y proximity; /* Más suave que mandatory */
  }
  
  .checkpoint-item {
    scroll-snap-align: start;
    scroll-snap-stop: normal; /* No forzar parada */
  }
  
  /* Permitir contenido que exceda 100vh */
  .checkpoint-item {
    min-height: 100vh;
    height: auto; /* Permitir crecimiento */
  }
  
  /* Navegación más discreta en desktop */
  .scroll-indicators {
    opacity: 0.7;
    transition: opacity 0.3s ease;
  }
  
  .scroll-indicators:hover {
    opacity: 1;
  }
  
  .section-nav {
    opacity: 0.8;
    transition: opacity 0.3s ease;
  }
  
  .section-nav:hover {
    opacity: 1;
  }
}

/* ==========================================================================
   GLOBAL OVERRIDES - PREVENIR CONFLICTOS GENERALES
   ========================================================================== */

/* Prevenir que el sistema de checkpoints interfiera con otros componentes */
body.loading .scroll-indicators,
body.loading .section-nav,
body.loading .back-to-top-button,
body.loading .scroll-progress {
  display: none !important;
}

/* Asegurar que modales tengan prioridad sobre checkpoints */
.projects-modal-overlay {
  z-index: 70 !important; /* Mayor que checkpoints */
}

.image-modal-overlay {
  z-index: 65 !important;
}

/* Prevenir scroll horizontal causado por checkpoints */
body {
  overflow-x: hidden;
}

.checkpoint-item,
.checkpoints-main-container {
  overflow-x: hidden;
  max-width: 100vw;
}

/* ==========================================================================
   PERFORMANCE OPTIMIZATIONS
   ========================================================================== */

@media (max-width: 767px) {
  
  /* Desactivar will-change en mobile para mejor performance */
  .project-card-red,
  .project-card-celeste,
  .project-card-expanded-full {
    will-change: auto !important;
    transform: none !important;
  }
  
  /* Desactivar animaciones costosas en mobile */
  .checkpoint-item,
  .project-checkpoint-dual,
  .scroll-indicators,
  .section-nav {
    animation: none !important;
    transition: none !important;
  }
}

/* ==========================================================================
   DEBUGGING - REMOVER EN PRODUCCIÓN
   ========================================================================== */

/* Uncomment para debugging visual
.checkpoint-item {
  border: 2px solid red !important;
}

.project-checkpoint-dual {
  border: 2px solid blue !important;
}

.scroll-indicators {
  border: 2px solid green !important;
}
*/

/* ==========================================================================
   ACCESSIBILITY FIXES
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  .checkpoint-item,
  .scroll-indicators,
  .section-nav,
  .back-to-top-button {
    animation: none !important;
    transition: none !important;
  }
}

/* Screen readers */
@media (prefers-reduced-motion) {
  .scroll-indicators::after {
    display: none; /* Ocultar tooltips para screen readers */
  }
}